sudo: required
services:
- docker
before_install:
- docker login -u $DOCKER_USER --password-stdin $DOCKER_PASS
- export REPO=mattpaletta/xcbuild
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH
  ; fi`
script:
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tagmy_example_app:latest
after_success:
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
env:
  global:
  - secure: rj4q3zlwrtEvAOn90OxC0S+F9dRzx7vCJSUHiiM8HVnb5liHJzXAmwwnbS9U+CFXZYSO73z+kLu4KxNZnd/tF+UTzNl3OCqLQTEqdnEzpgflyG6GUtsj11ucLjzrosQni3TQdq+jBJdvrQ4JkjM4rd7Q0LkA22/RygAxoe34DyGz6+O8UJ15bOEoMIZqP0wuKbViXVde1sBfV4DpO/c2bSYjzyMPwcmzOf1pIXWACk+aOcaH8DoWPUn5HdlzhBodjMmSsxts5J1ighqvHWRaRRMChb8T9OR75nJ3K+I0lPQCkbeJ37yT0/lfyRec5Hpe+n56FGlcMy7lU0ghfSi0/EiDyPJ9CsWWaz62n7V7D6Z+xPJULpv+7wdup19/33WYOY8LiAlXSa12704nB+qRzUjCxi3dJdL1+4zsit6BQYe4ODfjBRLelntRSoc1/GNjPc0PDkqPNhZJNO3L+Kn8shNHveKP7x72uZUrC0QguLO3ABpYkMSYLfsNfbvq7yIznbiqMCUpPZjdsp9JGkGu4h0wACbf71+qV86TAxVsqZ6/aEVVI1cS8N5HRnPBQL1vRKA2YfS0VFPVunUXPcHcRrRAvTh0rx3ONo9z92nQcIZVvUS4rSC2LkKHqVT4r087Sup89k/Zf+3Xy+D0yp2YdYFDiCeZu+9+e4PVJe1ckmA=
  - secure: LkL4HXjlCk5wSUB43nursoRc6E5MPJ7/UNMWLsKNbYJxr95QzVXfiRwEu2nHvyzgoN2i+6ArG/Ym96MoKLuCJALTN0SnfEugsR6iF6cptTyliLcNQcDYli3RheZ71XQ5PC/iQzPGxrtaoCg2QMX5X7hwBDtlK4iM8W7AHpQP8nTDbmpyoKRBzZMc2QC6J3kwJbeb+lTiTp+dwL5sRDYY0M7Ry55k4lWUwu+DAMryIVcMNAkWtvOHubs5nX/fCeS2Bul+ksbwZhfxDgV8as5byWMdatm8dCl1gCgN9ue8nQWe93K+KWpd91hN2FhOnuHA2OrdXwqqsZAooIK3HvXY6RiyN4XBnF+V3U1FMRHxOxmMVrHV0PGYLLHQi1csLJJVP86Z9Si/Pr/hk/DH1fesyq0fe1REnj9T/PEsbY6mthJ8/B1453kfFXfV5ut0VcYH54AF1JyEOe9UWdPcvfY7M374VtubEW5d/6q3AdIbOxbJkmKAtfz59H/D333/OYGFTpHlzLm28z4+887ZNdI6mBPwUAl1JMqr4jDIwVwha6tAp5FPu3AAu7tFYheH2hu1TqxQmM6kwMr8KC3fhtlx5ncLsdjotHIksa2zOBQWNQT1gtklPo78zoZqua3PA3JVCQAcjtaT8ekJjuUcFU8OfzmNz3eKNn3cbPwlJ3dlYRw=
  - secure: nrlEU579WYu5nr+2/K5QMdaJ2j9rJZDYMD7wNTEFyWaXaxBxXI81H/9mtijQT+iaoh0MPeJn+SL85zlpAfO9m43Yzq32jIbBdMWzVgyTNsR2PZjR6eKW9/5n68M+7hgm9683zMIBmJ+J4mNJ5oLVppYiLAoMvfOXjFh3XGwOL7yz9in/bENDXkvU55fTKpmI0ARDKEWIgnuBvvaIvJo9I+GzJrVB5ST1enYgaMF/Jvgqx6ZqVCBec60cZ67gGrfxSi2/npwHy62AW3WP9PwVclhp1C+dVZVZh+yDRqYaLpJygm6tGzRDH4yE+dE/cL4f+m2NMOiKGcb5kqPF11LbJdhijQIBwbBW4KtD2hvYngUEu/NjCxfz2KcGOyr7lbzgSUh6o8+VM/b+gwF0hlvpc35ZSWA6dMfFUD/3loNEZ6Y2njTHTi1ZaOxzwZRTvNgsDk6/5P660g7skgZFeS8l2FDV9nD7G1z0GCvo362x/sG9FdXpTra9vn8Oy0HwsevV80Hv28wYJYcI+XOOD021sYRoHZra/35JP64FgC/P1mvoHrrHGgWdoXRwF2rrw8iNKsOh/DByrxC8QUZ+YLE/XlVmlB62VaJVlRud3RNNZeXg4gBUVkyR1R7QsdDYMSf4Yfguj/kS+zfCcnXpFw3U6dLRd9rcC3xgot1EtYRveZQ=
